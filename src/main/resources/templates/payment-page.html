<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Car Insurance Plan</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
          font-family: 'Poppins', sans-serif;
          display: flex;
          min-height: 100vh;
          background: linear-gradient(to right, #c2e9fb, #a1c4fd);
          animation: fadeIn 1s ease-in;
          overflow: hidden;
          color: #333;
        }

        /* Sidebar */
        .sidebar {
          width: 260px;
          background: rgba(0,0,0,0.35);
          backdrop-filter: blur(14px);
          color: white;
          padding: 30px 25px;
          display: flex;
          flex-direction: column;
          gap: 22px;
          box-shadow: 5px 0 25px rgba(0,0,0,0.25);
          animation: slideInLeft 0.8s ease forwards;
          position: relative;
          z-index: 10;
        }
        .sidebar h3 {
          font-size: 24px;
          margin-bottom: 20px;
          font-weight: 700;
          text-shadow: 1px 1px 5px rgba(0,0,0,0.3);
        }
        .sidebar-item {
          padding: 14px 18px;
          background: rgba(255,255,255,0.15);
          border-radius: 12px;
          font-size: 16px;
          font-weight: 600;
          transition: background 0.3s ease;
        }
        .sidebar-item span {
          float: right;
          font-weight: 700;
          color: #ffdd59;
        }

        /* Main Content */
        .main-content {
          flex: 1;
          display: flex;
          flex-direction: column;
          align-items: center;
          padding: 40px 50px;
          overflow-y: auto;
          animation: slideInRight 0.8s ease forwards;
          max-width: 750px;
        }
        .form-container, .receipt-container {
          background: rgba(255,255,255,0.98);
          backdrop-filter: blur(12px);
          border-radius: 22px;
          box-shadow: 0 12px 30px rgba(0,0,0,0.18);
          width: 100%;
          padding: 35px 40px;
          margin-bottom: 30px;
          animation: fadeInUp 1s ease forwards;
        }
        h2, h3 {
          margin-bottom: 22px;
          font-weight: 700;
        }

        /* Form Fields */
        .form-group { margin-bottom: 18px; }
        label { font-weight: 600; display: block; margin-bottom: 6px; }
        input, select {
          width: 100%;
          padding: 12px 15px;
          border-radius: 12px;
          border: 1.8px solid #bbb;
          outline: none;
          font-size: 1rem;
          transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }
        input:focus, select:focus {
          border-color: #0056d2;
          box-shadow: 0 0 10px rgba(0,86,210,0.3);
        }

        /* Price Display */
        .price-display {
          background: #f1f5ff;
          border: 1px dashed #0056d2;
          padding: 14px 18px;
          border-radius: 12px;
          margin-top: 12px;
          font-weight: 600;
          animation: pulse 1.2s infinite alternate;
        }

        /* Buttons */
        .btn {
          display: inline-block;
          margin-top: 18px;
          background: linear-gradient(45deg, #007bff, #0056d2);
          color: white;
          border: none;
          padding: 16px 36px;
          border-radius: 40px;
          font-size: 1.25rem;
          font-weight: 700;
          cursor: pointer;
          transition: transform 0.25s ease, box-shadow 0.25s ease;
          box-shadow: 0 6px 15px rgba(0,86,210,0.4);
          letter-spacing: 0.05em;
        }
        .btn:hover { transform: scale(1.1); }
        .secure-btn {
          background: linear-gradient(90deg, #00c853, #009624);
          box-shadow: 0 8px 18px rgba(0, 200, 83, 0.5);
          position: relative;
          overflow: hidden;
        }
        .secure-btn::after {

          position: absolute;
          left: 12px;
          top: 50%;
          transform: translateY(-50%);
          font-size: 1.3rem;
          animation: floatLock 1.8s ease-in-out infinite;
        }

        /* Receipt Section */
        .receipt {
          text-align: left;
          max-height: 300px;  /* Set max height */
          overflow-y: auto;   /* Enable vertical scroll */
          background: #fefefe;
          padding: 20px 25px;
          border-radius: 16px;
          box-shadow: inset 0 0 12px rgba(0,0,0,0.05);
          line-height: 1.5;
          font-size: 1rem;
          color: #222;
        }
        .receipt p {
          margin-bottom: 12px;
          font-weight: 500;
        }
        .receipt table {
          width: 100%;
          border-collapse: collapse;
          margin-top: 18px;
        }
        .receipt th, .receipt td {
          border: 1px solid #ccc;
          padding: 10px 12px;
          text-align: left;
        }
        .receipt th {
          background: #d1e3ff;
          font-weight: 700;
          color: #003366;
        }
        .receipt .total-row td {
          font-weight: 700;
          background: #b0c8ff;
        }
        /* Scrollbar styling */
        .plans-list::-webkit-scrollbar {
          width: 6px;
        }

        /* Animations */
        @keyframes fadeIn { from {opacity: 0;} to {opacity: 1;} }
        @keyframes fadeInUp { from {opacity: 0; transform: translateY(24px);} to {opacity: 1; transform: translateY(0);} }
        @keyframes slideInLeft { from {transform: translateX(-110%);} to {transform: translateX(0);} }
        @keyframes slideInRight { from {transform: translateX(110px);} to {transform: translateX(0);} }
        @keyframes pulse { from {transform: scale(1);} to {transform: scale(1.03);} }
        @keyframes floatLock { 0%,100% {transform: translateY(-50%) scale(1);} 50% {transform: translateY(-60%) scale(1.2);} }
    </style>
</head>
<body>
<div class="sidebar">
    <h3>Entered Info</h3>
    <div class="sidebar-item">Vehicle Reg: <span id="regInfo">-</span></div>
    <div class="sidebar-item">Brand: <span id="brandInfo">-</span></div>
    <div class="sidebar-item">Model: <span id="modelInfo">-</span></div>
    <div class="sidebar-item">Plan: <span id="planInfo">-</span></div>
    <div class="sidebar-item">Price: <span id="priceInfo">-</span></div>
    <div class="sidebar-item">Name: <span id="NameInfo">-</span></div>
    <div class="sidebar-item">Phoneno.: <span id="PhonenoInfo">-</span></div>
    <div class="sidebar-item">Email: <span id="EmailInfo">-</span></div>
</div>

<div class="main-content">
    <div class="form-container" id="formContainer">
        <h2>üìù Car Insurance Details</h2>
        <div class="form-group"><label>Vehicle Registration Number</label><input type="text" id="regNumber" /></div>
        <div class="form-group"><label>Car Brand</label><input type="text" id="brand" /></div>
        <div class="form-group"><label>Car Model</label><input type="text" id="model" /></div>
        <div class="form-group">
            <label>Select Insurance Plan</label>
            <select id="plan">
                <option value="">Choose Your Insurance Plan</h2></option>
                <option value="Premium">SBI General Insurance</option>
                <option value="Premium">ICICI Lombard</option>
                <option value="Premium">Reliance General</option>
                <option value="Premium">National Insurance</option>
                <option value="Premium">Royal Sundaram</option>
                <option value="Premium">Chola MS</option>
                <option value="Premium">New India Assurance</option>
                <option value="Premium">United India Insurance</option>

            </select>
            <div class="price-display" id="priceDisplay">Plan Price: - | GST: - | Final: -</div>
        </div>
        <div class="form-group"><label>Owner Name</label><input type="text" id="ownerName" /></div>
        <div class="form-group"><label>Contact Number</label><input type="tel" id="contactNumber" pattern="[0-9]{10}" /></div>
        <div class="form-group"><label>Email Address</label><input type="email" id="emailAddress" /></div>
        <button class="btn secure-btn" id="generateBtn">Apply</button>
    </div>

    <div class="receipt-container" id="receiptContainer" style="display:none;">
        <h3>üßæ Insurance Receipt</h3>
        <div class="receipt" id="receiptContent"></div>
        <div style="margin-top:20px;text-align:center;">
            <button class="btn" id="printBtn">üñ® Print Receipt</button>
            <button class="btn" style="background:#ff4b4b;" id="backBtn">‚¨Ö Go Back</button>
        </div>
    </div>
</div>

<script>
    // Input elements
    const regInput = document.getElementById('regNumber');
    const brandInput = document.getElementById('brand');
    const modelInput = document.getElementById('model');
    const planSelect = document.getElementById('plan');
    const ownerInput = document.getElementById('ownerName');
    const contactInput = document.getElementById('contactNumber');
    const emailInput = document.getElementById('emailAddress');

    // Sidebar display elements
    const regInfo = document.getElementById('regInfo');
    const brandInfo = document.getElementById('brandInfo');
    const modelInfo = document.getElementById('modelInfo');
    const planInfo = document.getElementById('planInfo');
    const priceInfo = document.getElementById('priceInfo');
    const nameInfo = document.getElementById('NameInfo');
    const phoneInfo = document.getElementById('PhonenoInfo');
    const emailInfo = document.getElementById('EmailInfo');

    // Other DOM elements
    const priceDisplay = document.getElementById('priceDisplay');
    const generateBtn = document.getElementById('generateBtn');
    const printBtn = document.getElementById('printBtn');
    const backBtn = document.getElementById('backBtn');
    const formContainer = document.getElementById('formContainer');
    const receiptContainer = document.getElementById('receiptContainer');
    const receiptContent = document.getElementById('receiptContent');

    // Pricing object
    const planPricing = { "Premium": 714 };

    // Update Sidebar fields & price
    function updateSidebar() {
      regInfo.textContent = regInput.value.trim() || '-';
      brandInfo.textContent = brandInput.value.trim() || '-';
      modelInfo.textContent = modelInput.value.trim() || '-';

      const selectedPlanText = planSelect.options[planSelect.selectedIndex]?.text || '-';
      planInfo.textContent = selectedPlanText;

      nameInfo.textContent = ownerInput.value.trim() || '-';
      phoneInfo.textContent = contactInput.value.trim() || '-';
      emailInfo.textContent = emailInput.value.trim() || '-';

      updatePriceDisplay();
    }

    // Price and GST calculation
    function updatePriceDisplay() {
      const plan = planSelect.value;
      if (!plan || !planPricing[plan]) {
        priceDisplay.textContent = "Plan Price: - | GST: - | Final: -";
        priceInfo.textContent = "-";
        return;
      }

      const price = planPricing[plan];
      const gst = +(price * 0.18).toFixed(2);
      const final = +(price + gst).toFixed(2);

      priceDisplay.textContent = `Plan Price: ‚Çπ${price.toLocaleString()} | GST: ‚Çπ${gst.toFixed(2)} | Final: ‚Çπ${final.toFixed(2)}`;
      priceInfo.textContent = `‚Çπ${final.toFixed(2)}`;
    }

    // Auto-update sidebar on input
    [regInput, brandInput, modelInput, planSelect, ownerInput, contactInput, emailInput].forEach(el => {
      el.addEventListener('input', updateSidebar);
    });

    // Receipt generation
    function generateReceipt() {
      // Check all required fields
      if (
        !regInput.value.trim() ||
        !brandInput.value.trim() ||
        !modelInput.value.trim() ||
        !planSelect.value ||
        !ownerInput.value.trim() ||
        !contactInput.value.trim() ||
        !emailInput.value.trim()
      ) {
        alert("‚ö† Please fill in all fields before generating the receipt.");
        return;
      }

      const plan = planSelect.value;
      const planName = planSelect.options[planSelect.selectedIndex].text;
      const price = planPricing[plan];
      const gst = +(price * 0.18).toFixed(2);
      const final = +(price + gst).toFixed(2);

      const html = `
        <p><strong>Vehicle Registration:</strong> ${regInput.value.trim()}</p>
        <p><strong>Car Brand:</strong> ${brandInput.value.trim()}</p>
        <p><strong>Car Model:</strong> ${modelInput.value.trim()}</p>
        <p><strong>Insurance Plan:</strong> ${planName}</p>
        <p><strong>Owner Name:</strong> ${ownerInput.value.trim()}</p>
        <p><strong>Contact Number:</strong> ${contactInput.value.trim()}</p>
        <p><strong>Email Address:</strong> ${emailInput.value.trim()}</p>

        <table>
          <thead>
            <tr><th>Description</th><th>Amount (‚Çπ)</th></tr>
          </thead>
          <tbody>
            <tr><td>Plan Price</td><td>${price.toLocaleString()}</td></tr>
            <tr><td>GST (18%)</td><td>${gst.toFixed(2)}</td></tr>
            <tr class="total-row"><td>Total Payable</td><td>${final.toFixed(2)}</td></tr>
          </tbody>
        </table>
      `;

      receiptContent.innerHTML = html;
      receiptContainer.style.display = 'block';
      formContainer.style.display = 'none';
      receiptContainer.scrollIntoView({ behavior: 'smooth' });
    }

    // Button event handlers
    generateBtn.addEventListener('click', generateReceipt);

    backBtn.addEventListener('click', () => {
      receiptContainer.style.display = 'none';
      formContainer.style.display = 'block';
    });

    printBtn.addEventListener('click', () => {
      window.print();
    });

    // Initialize sidebar with placeholder values
    updateSidebar();
</script>

</script>
</body>
</html>
